# 音乐文件批量处理工具集 🎵

[English Version](README_EN.md)

三个实用的Python脚本，用于批量处理音乐文件的重命名和去重操作，现新增V2版本提供更强大的随机化功能。

## 📂 脚本列表

### 🎲 随机前缀工具（单字母版本）
适用于基础随机化需求，提供简单的单字母随机前缀。

#### 1. Add_Randomize_songs.py
**功能**: 为音乐文件添加随机**单字母**前缀，实现基础伪随机排序效果  
**用途**: 当播放器按文件名排序时，通过添加随机字母前缀（如 `A_歌名.mp3`）打乱播放顺序  
**特点**: 
- 支持多种音频格式（MP3、FLAC、WMA、M4A等）
- 自动跳过已有前缀的文件
- 随机生成26种大写字母前缀组合

#### 2. Remove_Randomize_songs.py
**功能**: 移除由Add_Randomize添加的**单字母**随机前缀  
**用途**: 恢复音乐文件的原始文件名，移除"字母_"前缀  
**特点**: 
- 智能识别单字母前缀格式
- 避免文件名冲突
- 安全恢复，不会误删非前缀文件

### 🔢 随机前缀工具（三位字符V2版本）
**新增！** 提供更强大的随机化效果，包含46,656种前缀组合。

#### 3. Add_Randomize_songs_V2.py
**功能**: 为音乐文件添加随机**三位字符**前缀，实现高级伪随机排序效果  
**用途**: 提供更彻底的随机化效果，前缀格式为 `ABC_歌名.mp3`（如 `X7K_歌名.mp3`）  
**特点**: 
- **46,656种组合**: 第一位A-Z，第二、三位A-Z或0-9
- 增强的随机性：相比V1版本（26种），V2提供46,656种组合
- 支持更多音频格式（新增.opus格式）
- 真正随机化：先打乱文件顺序再添加前缀
- 智能识别现有前缀，避免重复添加

#### 4. Remove_Randomize_songs_V2.py
**功能**: 移除由V2添加的**三位字符**前缀，并兼容V1的单字母前缀  
**用途**: 智能移除各种前缀格式，恢复原始文件名  
**特点**: 
- **双向兼容**: 支持移除 `ABC_`（三位字符）和 `A_`（单字母）前缀
- 智能冲突检测：自动处理文件名冲突情况
- 详细统计报告：显示恢复、跳过、无前缀的文件数量

### 🔍 重复歌曲查找工具

#### 5. Find_Duplicate_songs.py
**功能**: 智能查找并处理重复歌曲文件  
**用途**: 自动识别相同歌名和歌手的重复文件，保留高品质版本，删除低品质版本  
**特点**: 
- 支持标准化文本比较（忽略大小写、特殊字符）
- 智能音质识别（通过文件格式、品质后缀、文件大小）
- 提供多种安全模式：
  - 模拟运行（预览操作）
  - 安全模式（移动到备份文件夹）
  - 直接删除模式
- 生成详细操作日志
- 支持歌曲格式：`歌名 - 歌手.扩展名` 或 `歌名 - 歌手_后缀.扩展名`

## 📊 版本对比

| 功能特性 | V1（单字母） | V2（三位字符） |
|---------|------------|---------------|
| 前缀格式 | `A_歌名.mp3` | `ABC_歌名.mp3` |
| 组合数量 | 26种 | 46,656种 |
| 字符范围 | A-Z | 第一位A-Z，第二三位A-Z/0-9 |
| 随机性 | 基础 | 增强 |
| 兼容性 | 仅V1格式 | 兼容V1和V2格式 |
| 文件打乱 | 否 | 是（先随机排序） |

## 🚀 使用场景

1. **基础随机播放**: 使用 `Add_Randomize` 打乱音乐播放顺序（26种组合）
2. **高级随机播放**: 使用 `Add_Randomize_V2` 实现更彻底的随机化（46,656种组合）
3. **恢复整理**: 
   - 使用 `Remove_Randomize` 恢复V1前缀文件
   - 使用 `Remove_Randomize_V2` 恢复V1和V2前缀文件
4. **清理重复**: 使用 `Find_Duplicate` 清理音乐库中的重复歌曲，节省存储空间

## ⚠️ 注意事项

- **使用前务必备份重要音乐文件**
- V2版本提供更强的随机性，适合大型音乐库
- V2的移除工具兼容V1和V2两种格式
- `Find_Duplicate_songs.py` 依赖标准文件名格式，非标准格式可能无法正确识别
- 删除操作前务必使用模拟运行模式预览将要执行的操作

## 📦 依赖环境

- Python 3.x
- 无需额外依赖库（使用标准库）

## 🛠️ 使用方法

1. 将脚本放在音乐文件所在目录
2. 根据需求运行相应脚本：
   ```bash
   # V1版本 - 基础随机化（26种组合）
   python Add_Randomize_songs.py
   python Remove_Randomize_songs.py
   
   # V2版本 - 高级随机化（46,656种组合）
   python Add_Randomize_songs_V2.py
   python Remove_Randomize_songs_V2.py
   
   # 重复歌曲清理
   python Find_Duplicate_songs.py
   ```

## 🎯 选择建议

- **小型音乐库**（<100首）：使用V1版本即可
- **中型音乐库**（100-500首）：推荐使用V1版本
- **大型音乐库**（>500首）：推荐使用V2版本获得更好随机效果
- **不确定需求**：从V1版本开始，需要时升级到V2

## 🔄 版本迁移

从V1迁移到V2：
1. 先使用 `Remove_Randomize_songs.py` 移除V1前缀
2. 再使用 `Add_Randomize_songs_V2.py` 添加V2前缀

适用于需要批量整理音乐库、清理重复文件或实现伪随机播放的音乐爱好者。V2版本为大型音乐库提供了更强大的随机化功能。

---

*For English version, please see [README_EN.md](README_EN.md)*
